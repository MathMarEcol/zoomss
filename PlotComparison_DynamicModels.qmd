---
title: "ZooMSS Dynamic Model Comparison"
author: "ZooMSS Analysis"
date: "`r Sys.Date()`"
format: 
  html:
    toc: true
    toc-depth: 2
    code-fold: false
    fig-width: 12
    fig-height: 10
    self-contained: true
---

# Overview

This document compares ZooMSS dynamic model outputs across different chlorophyll scenarios to examine how environmental forcing affects zooplankton community dynamics.

## Model Scenarios

- **Low Chlorophyll (0.01 mg m⁻³)**: Oligotrophic conditions representing nutrient-poor environments
- **Medium Chlorophyll (0.1 mg m⁻³)**: Mesotrophic conditions with moderate productivity
- **High Chlorophyll (4.0 mg m⁻³)**: Eutrophic conditions with high productivity
- **Linear Chlorophyll**: Gradually increasing chlorophyll over time
- **Seasonal Chlorophyll**: Seasonal variation patterns in chlorophyll

```{r setup, message=FALSE, warning=FALSE}
library(tidyverse)
library(patchwork)

source("fZooMSS_Plot.R")
```

# Load Model Results

```{r load-data, message=FALSE}
# Load constant chlorophyll scenarios
load("20250806_chl0_01_0001.RData")  # 0.01 mg m-3 chl (oligotrophic)
out1 <- out

load("20250806_chl0_1_0001.RData")   # 0.1 mg m-3 chl (mesotrophic)
out2 <- out

load("20250806_chl4_0_0001.RData")   # 4.0 mg m-3 chl (eutrophic)
out3 <- out

# Load dynamic chlorophyll scenarios
load("20250806_linear_0001.RData")   # Linear increasing chl
out4 <- out

load("20250806_Seasonal_0001.RData") # Seasonal chl patterns
out5 <- out
```

# Abundance Time Series Comparison

Compare abundance patterns across all chlorophyll scenarios to understand how different productivity levels affect zooplankton population dynamics.

```{r abundance-comparison, fig.height=15, fig.width=12}
(fZooMSS_Plot_AbundTimeSeries(out1) + ggtitle("Low Chlorophyll (0.01 mg m⁻³)")) /
  (fZooMSS_Plot_AbundTimeSeries(out2) + ggtitle("Medium Chlorophyll (0.1 mg m⁻³)")) /
  (fZooMSS_Plot_AbundTimeSeries(out3) + ggtitle("High Chlorophyll (4.0 mg m⁻³)")) /
  (fZooMSS_Plot_AbundTimeSeries(out4) + ggtitle("Linear Increasing Chlorophyll")) /
  (fZooMSS_Plot_AbundTimeSeries(out5) + ggtitle("Seasonal Chlorophyll Patterns"))
```

# Biomass Time Series - All Species

Proportional biomass plots showing relative contribution of each species to total community biomass across scenarios.

```{r biomass-all-species, fig.height=15, fig.width=12}
((fZooMSS_Plot_BiomassTimeSeries(out1, proportional = TRUE) + ggtitle("Low Chlorophyll (0.01 mg m⁻³)")) /
    (fZooMSS_Plot_BiomassTimeSeries(out2, proportional = TRUE) + ggtitle("Medium Chlorophyll (0.1 mg m⁻³)")) /
    (fZooMSS_Plot_BiomassTimeSeries(out3, proportional = TRUE) + ggtitle("High Chlorophyll (4.0 mg m⁻³)")) /
    (fZooMSS_Plot_BiomassTimeSeries(out4, proportional = TRUE) + ggtitle("Linear Increasing Chlorophyll")) /
    (fZooMSS_Plot_BiomassTimeSeries(out5, proportional = TRUE) + ggtitle("Seasonal Chlorophyll Patterns"))) +
  plot_layout(guides = 'collect')
```

# Biomass Time Series - Key Species

Focus on major zooplankton functional groups to highlight ecological patterns and trophic dynamics.

```{r biomass-key-species, fig.height=15, fig.width=12}
# Define key species of ecological interest
spp <- c("Larvaceans", "Salps", "Jellyfish", "OmniCopepods", 
         "Euphausiids", "CarnCopepods", "Chaetognaths")

((fZooMSS_Plot_BiomassTimeSeries(out1, proportional = TRUE, species = spp) + ggtitle("Low Chlorophyll (0.01 mg m⁻³)")) /
    (fZooMSS_Plot_BiomassTimeSeries(out2, proportional = TRUE, species = spp) + ggtitle("Medium Chlorophyll (0.1 mg m⁻³)")) /
    (fZooMSS_Plot_BiomassTimeSeries(out3, proportional = TRUE, species = spp) + ggtitle("High Chlorophyll (4.0 mg m⁻³)")) /
    (fZooMSS_Plot_BiomassTimeSeries(out4, proportional = TRUE, species = spp) + ggtitle("Linear Increasing Chlorophyll")) /
    (fZooMSS_Plot_BiomassTimeSeries(out5, proportional = TRUE, species = spp) + ggtitle("Seasonal Chlorophyll Patterns"))) +
  plot_layout(guides = 'collect')
```

# Results Summary

The comparison reveals how different chlorophyll scenarios drive distinct zooplankton community dynamics:

- **Oligotrophic conditions** (0.01 mg m⁻³): Limited productivity constrains overall biomass
- **Mesotrophic conditions** (0.1 mg m⁻³): Moderate productivity supports balanced community structure  
- **Eutrophic conditions** (4.0 mg m⁻³): High productivity may favor certain functional groups
- **Linear increase**: Shows community response to gradually changing conditions
- **Seasonal patterns**: Captures natural temporal variability and community cycles

These results demonstrate the ZooMSS model's ability to capture environmental forcing effects on marine zooplankton communities across different productivity regimes.
